<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SusyNtuple: MCWeighter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MCWeighter Class Reference</h1><!-- doxytag: class="MCWeighter" -->
<p>A class to handle the normalization of Monte Carlo.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="MCWeighter_8h_source.html">MCWeighter.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for MCWeighter:</div>
<div class="dynsection">
<div class="center"><img src="classMCWeighter__coll__graph.png" border="0" usemap="#MCWeighter_coll__map" alt="Collaboration graph"/></div>
<map name="MCWeighter_coll__map" id="MCWeighter_coll__map">
<area shape="rect" id="node4" href="structMCWeighter_1_1ProcessValidator.html" title="Helper to keep track of events with invalid process id." alt="" coords="83,6,288,37"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classMCWeighter-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMCWeighter_1_1ProcessValidator.html">ProcessValidator</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper to keep track of events with invalid process id.  <a href="structMCWeighter_1_1ProcessValidator.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMCWeighter_1_1SumwMapKey.html">SumwMapKey</a></td></tr>
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>SumwMethod</b> { <b>Sumw_NT</b> =  0, 
<b>Sumw_MAP</b>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>XsecMethod</b> { <b>Xsec_NT</b> =  0, 
<b>Xsec_ST</b>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>WeightSys</b> { <br/>
&nbsp;&nbsp;<b>Sys_NOM</b> =  0, 
<b>Sys_XSEC_UP</b>, 
<b>Sys_XSEC_DN</b>, 
<b>Sys_PILEUP_UP</b>, 
<br/>
&nbsp;&nbsp;<b>Sys_PILEUP_DN</b>, 
<b>Sys_N</b>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a135514bc32eb048d6a73106b7f167e4e"></a><!-- doxytag: member="MCWeighter::SumwMap" ref="a135514bc32eb048d6a73106b7f167e4e" args="" -->
typedef std::map&lt; <a class="el" href="structMCWeighter_1_1SumwMapKey.html">SumwMapKey</a>, <br class="typebreak"/>
float &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>SumwMap</b></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a978ec62eb7345ce0b08d70a88d5f3504"></a><!-- doxytag: member="MCWeighter::MCWeighter" ref="a978ec62eb7345ce0b08d70a88d5f3504" args="(TTree *tree, std::string xsecDir=&quot;$ROOTCOREDIR/data/SUSYTools/mc12_8TeV/&quot;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>MCWeighter</b> (TTree *tree, std::string xsecDir=&quot;$ROOTCOREDIR/data/SUSYTools/mc12_8TeV/&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a406e90f5582be900e439f30692ca5269">buildSumwMap</a> (TTree *tree)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Build a map of MCID -&gt; sumw.  <a href="#a406e90f5582be900e439f30692ca5269"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0da8d8832298e0f4d0a535019252e479"></a><!-- doxytag: member="MCWeighter::clearAndRebuildSumwMap" ref="a0da8d8832298e0f4d0a535019252e479" args="(TTree *tree)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>clearAndRebuildSumwMap</b> (TTree *tree)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c5890d97dd0eaa456c16201c03584c7"></a><!-- doxytag: member="MCWeighter::dumpSumwMap" ref="a9c5890d97dd0eaa456c16201c03584c7" args="() const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>dumpSumwMap</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac1ef27fe4b0692d2821112baf78b7c16"></a><!-- doxytag: member="MCWeighter::dumpXsecCache" ref="ac1ef27fe4b0692d2821112baf78b7c16" args="() const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>dumpXsecCache</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5f6d2aa19a8a66d3644c8a239026803b"></a><!-- doxytag: member="MCWeighter::dumpXsecDb" ref="a5f6d2aa19a8a66d3644c8a239026803b" args="() const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>dumpXsecDb</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af0130094914bc7dd165a61bcdcde6090"></a><!-- doxytag: member="MCWeighter::setUseProcSumw" ref="af0130094914bc7dd165a61bcdcde6090" args="(bool useProcSumw=true)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#af0130094914bc7dd165a61bcdcde6090">setUseProcSumw</a> (bool useProcSumw=true)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specify methods to retrieve sumw and xsec. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4051575b275a77eca6515a0c4b17360a"></a><!-- doxytag: member="MCWeighter::setSumwMethod" ref="a4051575b275a77eca6515a0c4b17360a" args="(SumwMethod opt=Sumw_MAP)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>setSumwMethod</b> (SumwMethod opt=Sumw_MAP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad46a1ad49aad6b88e2067bc9f180c4f"></a><!-- doxytag: member="MCWeighter::setXsecMethod" ref="aad46a1ad49aad6b88e2067bc9f180c4f" args="(XsecMethod opt=Xsec_ST)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>setXsecMethod</b> (XsecMethod opt=Xsec_ST)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad4fb75cc1c70efb86bb2fa23f5471572"></a><!-- doxytag: member="MCWeighter::getMCWeight" ref="ad4fb75cc1c70efb86bb2fa23f5471572" args="(const Susy::Event *evt, const float lumi=LUMI_A_A3, WeightSys sys=Sys_NOM)" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#ad4fb75cc1c70efb86bb2fa23f5471572">getMCWeight</a> (const <a class="el" href="classSusy_1_1Event.html">Susy::Event</a> *evt, const float lumi=LUMI_A_A3, WeightSys sys=Sys_NOM)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MC Weight includes generator, xsec, lumi, and pileup weights. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f45e8d922205d4a82297bb8b4f0bc86"></a><!-- doxytag: member="MCWeighter::sumwmapHasKey" ref="a7f45e8d922205d4a82297bb8b4f0bc86" args="(SumwMapKey k)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>sumwmapHasKey</b> (<a class="el" href="structMCWeighter_1_1SumwMapKey.html">SumwMapKey</a> k)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6e44bd7f4f6d96f6560087cfe168af90"></a><!-- doxytag: member="MCWeighter::getSumw" ref="a6e44bd7f4f6d96f6560087cfe168af90" args="(const Susy::Event *evt)" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><b>getSumw</b> (const <a class="el" href="classSusy_1_1Event.html">Susy::Event</a> *evt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed421e8fb4cd78abf48a289f9926ecca"></a><!-- doxytag: member="MCWeighter::getCrossSection" ref="aed421e8fb4cd78abf48a289f9926ecca" args="(const Susy::Event *evt)" -->
SUSY::CrossSectionDB::Process&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#aed421e8fb4cd78abf48a289f9926ecca">getCrossSection</a> (const <a class="el" href="classSusy_1_1Event.html">Susy::Event</a> *evt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get cross section for this event. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a47e7f8c8f2bbfcbec599438e158081ab"></a><!-- doxytag: member="MCWeighter::getXsecTimesEff" ref="a47e7f8c8f2bbfcbec599438e158081ab" args="(const Susy::Event *evt, WeightSys sys=Sys_NOM)" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><b>getXsecTimesEff</b> (const <a class="el" href="classSusy_1_1Event.html">Susy::Event</a> *evt, WeightSys sys=Sys_NOM)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9978be33f28230ebc53e52f9e5acd331"></a><!-- doxytag: member="MCWeighter::getPileupWeight" ref="a9978be33f28230ebc53e52f9e5acd331" args="(const Susy::Event *evt, WeightSys sys=Sys_NOM)" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a9978be33f28230ebc53e52f9e5acd331">getPileupWeight</a> (const <a class="el" href="classSusy_1_1Event.html">Susy::Event</a> *evt, WeightSys sys=Sys_NOM)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the pileup weight. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMCWeighter.html">MCWeighter</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a1355c8724ec2d7ec6f6722e7b26ca8c1">setLabelBinCounter</a> (const std::string &amp;v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">specify the bin used to compute sumw  <a href="#a1355c8724ec2d7ec6f6722e7b26ca8c1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a3435aa6505f35d6091c5aabbc95bdc52">parseAdditionalXsecFile</a> (const std::string &amp;filename, bool verbose)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">read additional files containing more cross section values  <a href="#a3435aa6505f35d6091c5aabbc95bdc52"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab549959541d9afd071ba6231d02810b0"></a><!-- doxytag: member="MCWeighter::parseAdditionalXsecDirectory" ref="ab549959541d9afd071ba6231d02810b0" args="(const std::string &amp;dir, bool verbose)" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#ab549959541d9afd071ba6231d02810b0">parseAdditionalXsecDirectory</a> (const std::string &amp;dir, bool verbose)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">same as parseAdditionalXsecFile, but get any *.txt in a given directory <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab72f163afc68a06d5dc81ddfa06b3df9"></a><!-- doxytag: member="MCWeighter::setAllowInvalid" ref="ab72f163afc68a06d5dc81ddfa06b3df9" args="(bool v)" -->
<a class="el" href="classMCWeighter.html">MCWeighter</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#ab72f163afc68a06d5dc81ddfa06b3df9">setAllowInvalid</a> (bool v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">toggle m_allowInvalid option <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af191620eabb7236c3a8c011ef792901f"></a><!-- doxytag: member="MCWeighter::setVerbose" ref="af191620eabb7236c3a8c011ef792901f" args="(bool v)" -->
<a class="el" href="classMCWeighter.html">MCWeighter</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#af191620eabb7236c3a8c011ef792901f">setVerbose</a> (bool v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">toggle m_verbose <br/></td></tr>
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#af9951f4b6bae9f495d6c39c01fd83aaf">defaultLabelBinCounter</a> (const unsigned int &amp;dsid, bool verbose)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">counter used to compute the normalization  <a href="#af9951f4b6bae9f495d6c39c01fd83aaf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a265eed406968f9b44801be9aba8bd5b4"></a><!-- doxytag: member="MCWeighter::checkHistoHasBin" ref="a265eed406968f9b44801be9aba8bd5b4" args="(const TH1F &amp;histo, const std::string &amp;binLabel)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a265eed406968f9b44801be9aba8bd5b4">checkHistoHasBin</a> (const TH1F &amp;histo, const std::string &amp;binLabel)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">print a warning if the histo doesn't have a bin with the given label <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ec588bc19ab7918e8edea9331dc0808"></a><!-- doxytag: member="MCWeighter::defaultXsecDir" ref="a2ec588bc19ab7918e8edea9331dc0808" args="()" -->
static std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a2ec588bc19ab7918e8edea9331dc0808">defaultXsecDir</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">default directory from which we read the xsec files for SUSY::CrossSectionDB <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac49d6e9eb4604b72ea44a105978628f1"></a><!-- doxytag: member="MCWeighter::xsecFilesForSimplifiedModels" ref="ac49d6e9eb4604b72ea44a105978628f1" args="()" -->
static std::vector&lt; std::string &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#ac49d6e9eb4604b72ea44a105978628f1">xsecFilesForSimplifiedModels</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a list of the xsec files containing known simplified models <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace4a52bfbc36ad5ac91a7eed2fce2e3c"></a><!-- doxytag: member="MCWeighter::dsidsForKnownSimpliedModelSamples" ref="ace4a52bfbc36ad5ac91a7eed2fce2e3c" args="(bool verbose)" -->
static std::vector&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#ace4a52bfbc36ad5ac91a7eed2fce2e3c">dsidsForKnownSimpliedModelSamples</a> (bool verbose)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a list of known SM dsids from <a class="el" href="classMCWeighter.html#ac49d6e9eb4604b72ea44a105978628f1" title="a list of the xsec files containing known simplified models">xsecFilesForSimplifiedModels()</a> <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a261aaa064c91f711c24e1078cb4ef3b9">isFormattedAsSusyCrossSection</a> (std::string filename, bool verbose)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">determine whether a given file is formatted following the CrossSectionDB format  <a href="#a261aaa064c91f711c24e1078cb4ef3b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76fcc78a03c034f40270c39a495b95cd"></a><!-- doxytag: member="MCWeighter::readDsidsFromSusyCrossSectionFile" ref="a76fcc78a03c034f40270c39a495b95cd" args="(std::string filename, bool verbose)" -->
static std::vector&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a76fcc78a03c034f40270c39a495b95cd">readDsidsFromSusyCrossSectionFile</a> (std::string filename, bool verbose)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">given a text file containing cross sections for CrossSectionDB, return the dsids <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa74db6ec2714b846ff361136313ba46b"></a><!-- doxytag: member="MCWeighter::readDsidsFromSusyCrossSectionLine" ref="aa74db6ec2714b846ff361136313ba46b" args="(const std::string &amp;line, int &amp;dsid, bool verbose)" -->
static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#aa74db6ec2714b846ff361136313ba46b">readDsidsFromSusyCrossSectionLine</a> (const std::string &amp;line, int &amp;dsid, bool verbose)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">given a line from a xsec file, parse the dsid; return false if cannot parse <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a8fd90b6d8152494bcef05b66f3cb40f3">isSimplifiedModel</a> (const unsigned int &amp;dsid, bool verbose)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">guess from dsid whether this sample is a simplified model one  <a href="#a8fd90b6d8152494bcef05b66f3cb40f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8806028803f5c04a0d753a365afd3224"></a><!-- doxytag: member="MCWeighter::readFirstEvent" ref="a8806028803f5c04a0d753a365afd3224" args="(TTree *tree)" -->
static const <a class="el" href="classSusy_1_1Event.html">Susy::Event</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a8806028803f5c04a0d753a365afd3224">readFirstEvent</a> (TTree *tree)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">read the first event from the tree (often used to retrieve sample parameters) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0b2b5a41159a50d5a855aa4ebac73f9d"></a><!-- doxytag: member="MCWeighter::extractProcessFromCutflowHistoname" ref="a0b2b5a41159a50d5a855aa4ebac73f9d" args="(const std::string &amp;histoName, const std::string &amp;prefix)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a0b2b5a41159a50d5a855aa4ebac73f9d">extractProcessFromCutflowHistoname</a> (const std::string &amp;histoName, const std::string &amp;prefix)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract 'XYZ' from 'prefixXYZ' <br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a30bcec6a946901ab1bbbc6de31ce60f8"></a><!-- doxytag: member="MCWeighter::total_sumw" ref="a30bcec6a946901ab1bbbc6de31ce60f8" args="" -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMCWeighter.html#a30bcec6a946901ab1bbbc6de31ce60f8">total_sumw</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get sumw for this event. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A class to handle the normalization of Monte Carlo. </p>
<p>A MC sample is normalized with the factor <img class="formulaInl" alt="$\sigma * lumi / \sum w$" src="form_0.png"/> This factor multiplies the generator event weight and all the other factors (pileup, lepton efficiency, trigger scale factors etc.) Some samples can include multiple processes. This class holds a map of the <img class="formulaInl" alt="$\sum w$" src="form_1.png"/> values for each process. The <img class="formulaInl" alt="$\sum w$" src="form_1.png"/> is computed from the cutflow histograms that are stored with the susyNt tree.</p>
<p>The user can specify the bin whose contents are used to compute  w; otherwise <a class="el" href="classMCWeighter.html#af9951f4b6bae9f495d6c39c01fd83aaf" title="counter used to compute the normalization">defaultLabelBinCounter()</a> will be used.</p>
<p>Two types of histograms are considered:</p>
<ul>
<li>for samples that contain only one process (most of them) `genCutFlow`</li>
<li>for samples that contain multiple processes (mostly slepton samples) `procCutFlowXYZ`, where `XYZ` is the process number</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>drop all the obsolete functionalities. Right now we support only the sumwmap method with the sumw retrieved from the histogram.</dd></dl>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a406e90f5582be900e439f30692ca5269"></a><!-- doxytag: member="MCWeighter::buildSumwMap" ref="a406e90f5582be900e439f30692ca5269" args="(TTree *tree)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MCWeighter::buildSumwMap </td>
          <td>(</td>
          <td class="paramtype">TTree *&nbsp;</td>
          <td class="paramname"> <em>tree</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Build a map of MCID -&gt; sumw. </p>
<p>This method will loop over the input files associated with the TChain. The MCID in the first entry of the tree will be used, so one CANNOT use this if multiple datasets are combined into one SusyNt tree file! The generator weighted cutflow histograms will then be used to calculate the total sumw for each MCID. Each dataset used here must be complete, they CANNOT be spread out across multiple jobs. However, one can have more than one (complete) dataset in the chain, which is why we use the map. </p>

</div>
</div>
<a class="anchor" id="af9951f4b6bae9f495d6c39c01fd83aaf"></a><!-- doxytag: member="MCWeighter::defaultLabelBinCounter" ref="af9951f4b6bae9f495d6c39c01fd83aaf" args="(const unsigned int &amp;dsid, bool verbose)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string MCWeighter::defaultLabelBinCounter </td>
          <td>(</td>
          <td class="paramtype">const unsigned int &amp;&nbsp;</td>
          <td class="paramname"> <em>dsid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>verbose</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>counter used to compute the normalization </p>
<p>Unless the user has specified a value with <a class="el" href="classMCWeighter.html#a1355c8724ec2d7ec6f6722e7b26ca8c1" title="specify the bin used to compute sumw">setLabelBinCounter()</a>, use "Initial" for all samples, and "SusyProp Veto" for SUSY simplified models. </p>

</div>
</div>
<a class="anchor" id="a261aaa064c91f711c24e1078cb4ef3b9"></a><!-- doxytag: member="MCWeighter::isFormattedAsSusyCrossSection" ref="a261aaa064c91f711c24e1078cb4ef3b9" args="(std::string filename, bool verbose)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MCWeighter::isFormattedAsSusyCrossSection </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>verbose</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>determine whether a given file is formatted following the CrossSectionDB format </p>
<p>The format is essentially 6 words:</p>
<p>id name(or final_state) xsect kfactor efficiency rel.uncertainty</p>
<p>Empty lines and comments ('#') are skipped. For more details, see SUSYTools/SUSYCrossSection.h </p>

</div>
</div>
<a class="anchor" id="a8fd90b6d8152494bcef05b66f3cb40f3"></a><!-- doxytag: member="MCWeighter::isSimplifiedModel" ref="a8fd90b6d8152494bcef05b66f3cb40f3" args="(const unsigned int &amp;dsid, bool verbose)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MCWeighter::isSimplifiedModel </td>
          <td>(</td>
          <td class="paramtype">const unsigned int &amp;&nbsp;</td>
          <td class="paramname"> <em>dsid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>verbose</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>guess from dsid whether this sample is a simplified model one </p>
<p>This guess is based on whether the dsid is in a list of known dsids from the xsec files in 'SUSYTools/data'.</p>
<p>See also util/test_mcWeighter.cxx </p>

</div>
</div>
<a class="anchor" id="a3435aa6505f35d6091c5aabbc95bdc52"></a><!-- doxytag: member="MCWeighter::parseAdditionalXsecFile" ref="a3435aa6505f35d6091c5aabbc95bdc52" args="(const std::string &amp;filename, bool verbose)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t MCWeighter::parseAdditionalXsecFile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>verbose</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>read additional files containing more cross section values </p>
<p>This is to account for samples that are not in the SUSYTools lists. Returns the number of cross section values read from the file. </p>

</div>
</div>
<a class="anchor" id="a1355c8724ec2d7ec6f6722e7b26ca8c1"></a><!-- doxytag: member="MCWeighter::setLabelBinCounter" ref="a1355c8724ec2d7ec6f6722e7b26ca8c1" args="(const std::string &amp;v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMCWeighter.html">MCWeighter</a> &amp; MCWeighter::setLabelBinCounter </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>specify the bin used to compute sumw </p>
<p>If the label is set after sumwmap has been built, you need to call clearAndRebuildSumwMap. For a list of available bin labels (counters), see SusyNtMaker::makeCutFlow() </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>SusyNtuple/<a class="el" href="MCWeighter_8h_source.html">MCWeighter.h</a></li>
<li>Root/MCWeighter.cxx</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 16 Sep 2015 for SusyNtuple by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
